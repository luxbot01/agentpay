# AgentPay Deployment Guide

## Render Free Tier Deployment

### Prerequisites
1. GitHub account with the AgentPay repo
2. Render account (free)

### Steps

1. **Connect to Render**
   - Go to https://dashboard.render.com
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repo (luxbot01/agentpay)
   - Render will detect the `render.yaml` file

2. **Deploy**
   - The blueprint will create:
     - Web service (Node.js backend)
     - PostgreSQL database (free tier)
   - Click "Apply"

3. **Set Environment Variables**
   In the Render dashboard, add these env vars to your web service:
   - `RESEND_API_KEY` - Your Resend API key for emails
   - (Other vars are auto-generated by render.yaml)

4. **Update Frontend**
   After deployment, update `frontend/.env.production`:
   ```
   VITE_API_URL=https://your-render-service-url.onrender.com
   ```
   Then rebuild and redeploy to GitHub Pages.

### Free Tier Limitations
- **Sleep mode**: After 15 minutes of inactivity, the service sleeps
- **Cold start**: First request after sleep takes ~30 seconds
- **Workaround**: Use a ping service (UptimeRobot) to keep it awake during judging

### Database Migration
The schema uses PostgreSQL-compatible types. On first deploy:
1. Render runs `prisma migrate deploy` automatically
2. Database tables are created
3. No manual migration needed

### Troubleshooting
- Check Render logs in the dashboard
- Ensure all env vars are set
- Verify DATABASE_URL is connected to the PostgreSQL instance
